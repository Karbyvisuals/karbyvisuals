<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
<title>27sun ‚Äì Video editor & photographer</title>
<link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:Inter,Arial,sans-serif;background:#0a0a0a;color:#f2f2f2;overflow-x:hidden;line-height:1.5}

body::before{
  content:"";
  position:fixed;
  inset:0;
  background: 
    radial-gradient(circle at calc(5% + (var(--scroll, 0) * 0.9%)) calc(5% + (var(--scroll, 0) * 0.7%)), rgba(255,122,24,0.15), transparent 60%),
    linear-gradient(to bottom, rgba(10,10,10,.85), rgba(10,10,10,.95)),
    repeating-linear-gradient(to right, rgba(255,255,255,.02) 0, rgba(255,255,255,.02) 1px, transparent 1px, transparent 140px);
  z-index:-1;
  pointer-events: none;
  transform: translateZ(0);
}

section{padding:80px 6%; position: relative;}
h2{font-size:clamp(24px, 5vw, 32px);font-weight:500;margin-bottom:15px;letter-spacing:1px}
h3{opacity:.7;margin-bottom:10px;font-weight:500}
.top-bar{position:fixed;top:0;width:100%;height:80px;background:rgba(10,10,10,.8);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);display:flex;align-items:center;justify-content:center;z-index:1000;border-bottom:1px solid rgba(255,255,255,0.05)}
.top-bar img{height:55px;width:auto;border-radius:10px}
.lang-switch{position:absolute;right:15px}.lang-switch button{background:none;border:1px solid rgba(255,255,255,.2);color:rgba(255,255,255,.5);padding:5px 12px;margin-left:4px;border-radius:999px;cursor:pointer;font-size:12px;transition:.3s;font-weight:600}
.lang-switch button.active{background:#ff7a18;color:#000;border-color:#ff7a18}
.hero{min-height:90vh;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:40px;padding-top:120px}
.logo{font-family:'UnifrakturCook',cursive;font-size:clamp(60px, 12vw, 96px);line-height:1;text-align:center}
.hero-text{flex:1;min-width:300px;text-align:center}
.hero-right{flex:1;min-width:300px;display:flex;flex-direction:column;align-items:center}
.hero img{width:100%;max-width:340px;border-radius:20px;box-shadow:0 20px 50px rgba(0,0,0,.5)}
.about-me{text-align:left;font-size:14px;max-width:340px;margin-top:20px;border-left:2px solid #ff7a18;padding-left:15px;opacity:.9}
.about-me b{color:#ff7a18}
.gear-list {list-style: none; margin-top: 10px; font-size: 13px; padding-left: 0;}
.gear-list li::before {content: "‚Ä¢"; color: #ff7a18; display: inline-block; width: 1em; margin-left: 0;}

.btn{display:inline-block;margin-top:30px;padding:14px 35px;border-radius:999px;background:#ff7a18;color:#000!important;text-decoration:none;font-weight:600;transition:.2s; border:none; cursor:pointer;}
.btn:disabled{background:#444; cursor:not-allowed;}

.slider-container {position: relative; width: 100%;}
.nav-arrow {
  position: absolute; top: 50%; transform: translateY(-50%);
  background: rgba(255,122,24,0.7); color: #000; border: none;
  width: 36px; height: 36px; border-radius: 50%; cursor: pointer;
  z-index: 10; display: none; align-items: center; justify-content: center;
  font-weight: bold; font-size: 18px; transition: 0.3s;
}
.nav-arrow:hover {background: rgba(255,122,24,1);}
.nav-arrow.prev {left: -18px;}
.nav-arrow.next {right: -18px;}
@media (min-width: 1024px) { .nav-arrow { display: flex; } }

.video-slider,.gallery-wrapper{display:flex;gap:15px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:15px;scrollbar-width:none;scroll-behavior: smooth;}
.video-slider::-webkit-scrollbar,.gallery-wrapper::-webkit-scrollbar{display:none}
.video-slider.horizontal iframe{min-width:85vw;max-width:400px;height:220px;border-radius:15px;scroll-snap-align:center;border:none;background:#000}
.video-slider.vertical video{min-width:260px;height:460px;border-radius:18px;background:#111;object-fit:cover;scroll-snap-align:center}
.gallery-wrapper img{height:400px;width:auto;max-width:90vw;border-radius:15px;scroll-snap-align:center;flex-shrink:0;background:#1a1a1a;object-fit:contain}

.chat-container{height:400px;overflow:hidden;position:relative;background:rgba(255,255,255,.02);border-radius:25px;border:1px solid rgba(255,255,255,0.05);mask-image:linear-gradient(to bottom,transparent,black 10%,black 90%,transparent)}
.chat-track{display:flex;flex-direction:column;gap:20px;padding:20px;animation:scrollUp 25s linear infinite;will-change:transform;transform:translateZ(0)}
@keyframes scrollUp{0%{transform:translateY(0)}100%{transform:translateY(-50%)}}
.chat-bubble{display:flex;align-items:flex-end;gap:10px;max-width:90%}
.chat-bubble.right{align-self:flex-end;flex-direction:row-reverse}
.chat-bubble img{width:35px;height:35px;border-radius:50%;object-fit:cover}
.message-content{padding:12px 16px;border-radius:18px;font-size:14px}
.left .message-content{background:#262626;color:#fff;border-bottom-left-radius:4px}
.right .message-content{background:#ff7a18;color:#000;border-bottom-right-radius:4px;font-weight:500}
.sender-name{display:block;font-size:9px;opacity:.4;margin-bottom:4px;text-transform:uppercase;letter-spacing:1px}

.pricing{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}
.card{padding:30px;border-radius:20px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(5px);display:flex;flex-direction:column;justify-content:space-between}
.price{font-size:20px;margin-top:10px;font-weight:600}
.discount{font-size:12px;color:#ff7a18;margin-top:8px;font-weight:600}
.price-tag{color:#ff7a18; font-weight: 700; margin-left: 5px;}
.bundle-card{border:1px solid #ff7a18;background:rgba(255,122,24,.05)}

/* SLOT MACHINE STYLES */
.game-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; z-index: 2000; backdrop-filter: blur(20px); }
.game-content { background: #111; border: 1px solid #ff7a18; padding: 40px; border-radius: 30px; width: 90%; max-width: 450px; text-align: center; position: relative; box-shadow: 0 0 50px rgba(255,122,24,0.2); }
.slot-container { display: flex; justify-content: center; gap: 15px; margin: 30px 0; perspective: 1000px; }
.reel-window { 
    width: 90px; height: 120px; background: #000; border: 2px solid #333; 
    border-radius: 15px; overflow: hidden; position: relative;
    box-shadow: inset 0 0 20px rgba(0,0,0,1);
}
.reel-strip {
    position: absolute; width: 100%; top: 0; left: 0;
    display: flex; flex-direction: column; align-items: center;
    transition: transform 0.5s cubic-bezier(0.45, 0.05, 0.55, 0.95);
}
.slot-icon { 
    height: 120px; display: flex; align-items: center; justify-content: center; 
    font-size: 50px; width: 100%; filter: drop-shadow(0 0 5px rgba(255,255,255,0.2));
}
.spinning { filter: blur(4px); transition: none !important; }

.promo-wrap { display: flex; background: #1a1a1a; border: 1px dashed #ff7a18; padding: 12px; border-radius: 12px; justify-content: space-between; align-items: center; margin-top: 20px; }
#promo-code { font-family: monospace; font-weight: bold; color: #ff7a18; font-size: 16px; word-break: break-all; }
.copy-btn { background: #ff7a18; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 12px; flex-shrink: 0; margin-left: 10px; }

@media(max-width:600px){section{padding:60px 5%}.hero{gap:20px}.top-bar{height:70px}.gallery-wrapper img{height:320px}}
</style>
</head>
<body>

<div class="top-bar">
  <img src="logo.PNG" alt="Logo">
  <div class="lang-switch">
    <button id="btn-cs" class="active" onclick="setLang('cs')">CZ</button>
    <button id="btn-en" onclick="setLang('en')">EN</button>
  </div>
</div>

<section class="hero">
  <div class="hero-text">
    <div class="logo">27sun</div>
    <p data-i18n="hero">Video editor & photographer<br>Reels ‚Ä¢ TikTok ‚Ä¢ YouTube</p>
    <a href="#contact" class="btn" data-i18n="contactBtn">Kontakt</a>
  </div>
  <div class="hero-right">
    <img src="profile.JPG" alt="Samuel Karb√°n" fetchpriority="high">
    <div class="about-me">
      <div data-i18n="aboutText"></div>
    </div>
  </div>
</section>

<section>
<h2 data-i18n="pricing">Slu≈æby & Cen√≠k</h2>
<div class="pricing">
    <div class="card"><h3 data-i18n="serv1">üé¨ 1x Reels / TikTok (st≈ôih)</h3><p class="price" data-i18n="price1">od 350 Kƒç</p></div>
    <div class="card"><div><h3 data-i18n="servEdit">üé• St≈ôih videoklipu</h3><p class="price" data-i18n="priceEdit">od 900 Kƒç</p></div><p class="discount"><span data-i18n="referral">Referral Deal -40%:</span> <span class="price-tag" data-i18n="refEdit">od 540 Kƒç</span></p></div>
    <div class="card"><div><h3 data-i18n="servShoot">üé• Nat√°ƒçen√≠ + St≈ôih</h3><p class="price" data-i18n="priceShoot">od 1 100 Kƒç</p></div><p class="discount"><span data-i18n="referral">Referral Deal -40%:</span> <span class="price-tag" data-i18n="ref1">od 660 Kƒç</span></p></div>
</div>

<p style="text-align:center; margin-top:35px;">
  <a href="javascript:void(0)" onclick="openGame()" style="color:#ff7a18; text-decoration:none; font-weight:bold; font-size:15px; border: 1px solid #ff7a18; padding: 10px 20px; border-radius: 99px; background: rgba(255,122,24,0.05);" data-i18n="playGame">üé∞ Zkus ≈°tƒõst√≠ o slevu</a>
</p>
</section>

<div id="game-modal" class="game-overlay">
  <div class="game-content">
    <button onclick="closeGame()" style="position:absolute;top:15px;right:20px;background:none;border:none;color:#fff;font-size:30px;cursor:pointer;opacity:0.5;">&times;</button>
    
    <div id="game-main-screen">
      <h2 data-i18n="gameTitle">27sun Slot Machine</h2>
      <p id="attempts-left" style="font-size: 12px; color: #ff7a18; margin-top: 5px; font-weight: 600;">Zb√Ωv√° pokus≈Ø: 5/5</p>
      
      <div class="slot-container">
        <div class="reel-window"><div id="reel1" class="reel-strip"></div></div>
        <div class="reel-window"><div id="reel2" class="reel-strip"></div></div>
        <div class="reel-window"><div id="reel3" class="reel-strip"></div></div>
      </div>

      <button id="spin-btn" class="btn" onclick="spinSlots()" data-i18n="gameStart">Roztoƒçit automat</button>
    </div>

    <div id="game-result-screen" style="display:none">
      <h2 id="result-title" style="color:#ff7a18">V√ùHRA!</h2>
      <div id="reward-info">
        <div id="reward-val" style="font-size:32px; font-weight:800; color:#fff; margin:15px 0;"></div>
        <div class="promo-wrap"><span id="promo-code"></span><button class="copy-btn" onclick="copyPromo()" id="btn-copy">Copy</button></div>
        <p style="font-size:11px; opacity:0.5; margin-top:12px;">Tento k√≥d je unik√°tnƒõ za≈°ifrov√°n pro tvou v√Ωhru.</p>
      </div>
      <button class="btn" onclick="resetGame()" style="margin-top:20px; background:none; border:1px solid #ff7a18; color:#ff7a18;">Zkusit znovu</button>
    </div>
  </div>
</div>

<script>
/* --- CONFIGURATION & SECURITY --- */
const SALT = "27SUN_SECRET_KEY_2025"; // Pou≈æito pro hashov√°n√≠ k√≥du
const MAX_ATTEMPTS = 5;
const SYMBOLS = ["üì∑", "üé¨", "üéûÔ∏è", "‚ú®", "üíé", "üî•"];

const WEIGHTED_REWARDS = [
  { val: 10, weight: 50 },  // 50% ≈°ance na 10% slevu
  { val: 20, weight: 30 },  // 30% ≈°ance na 20% slevu
  { val: 50, weight: 15 },  // 15% ≈°ance na 50% slevu
  { val: 100, weight: 0.5 } // 0.5% ≈°ance na 100% slevu
];

/* --- SLOT ENGINE --- */
let isSpinning = false;

function generateReels() {
    [1,2,3].forEach(id => {
        const strip = document.getElementById(`reel${id}`);
        strip.innerHTML = '';
        // Vytvo≈ô√≠me dlouh√Ω p√°s ikon pro efekt toƒçen√≠
        for(let i=0; i<30; i++) {
            const div = document.createElement('div');
            div.className = 'slot-icon';
            div.innerHTML = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
            strip.appendChild(div);
        }
    });
}

function getDailyAttempts() {
    const today = new Date().toDateString();
    const data = JSON.parse(localStorage.getItem('slot_attempts') || '{}');
    if (data.date !== today) return MAX_ATTEMPTS;
    return Math.max(0, MAX_ATTEMPTS - (data.count || 0));
}

function updateAttemptUI() {
    const left = getDailyAttempts();
    document.getElementById('attempts-left').innerText = `Zb√Ωv√° pokus≈Ø: ${left}/${MAX_ATTEMPTS}`;
    if (left <= 0) {
        document.getElementById('spin-btn').disabled = true;
        document.getElementById('spin-btn').innerText = "Limit vyƒçerp√°n";
    }
}

function openGame() {
    document.getElementById('game-modal').style.display = 'flex';
    generateReels();
    updateAttemptUI();
}

function closeGame() { document.getElementById('game-modal').style.display = 'none'; }

async function spinSlots() {
    if (isSpinning || getDailyAttempts() <= 0) return;
    
    isSpinning = true;
    const btn = document.getElementById('spin-btn');
    btn.disabled = true;

    // Logov√°n√≠ pokusu
    const data = JSON.parse(localStorage.getItem('slot_attempts') || '{"count":0}');
    data.date = new Date().toDateString();
    data.count++;
    localStorage.setItem('slot_attempts', JSON.stringify(data));
    updateAttemptUI();

    // Urƒçen√≠ v√Ωsledku (v√°≈æen√° pravdƒõpodobnost)
    const rand = Math.random() * 100;
    let cumulative = 0;
    let winAmount = 0;
    for (let r of WEIGHTED_REWARDS) {
        cumulative += r.weight;
        if (rand <= cumulative) { winAmount = r.val; break; }
    }

    const isWin = winAmount > 0 && Math.random() > 0.4; // 60% ≈°ance, ≈æe padnou 3 stejn√© symboly pokud vyhr√°l ƒç√°stku
    const finalIcon = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];

    const reels = [1, 2, 3];
    reels.forEach((id, idx) => {
        const strip = document.getElementById(`reel${id}`);
        strip.classList.add('spinning');
        
        const stopPos = 20 + Math.floor(Math.random() * 5);
        const targetIcon = (isWin) ? finalIcon : SYMBOLS[(idx + Math.floor(Math.random()*5)) % SYMBOLS.length];
        
        // Nastaven√≠ ikony na c√≠lovou pozici
        strip.children[stopPos].innerHTML = targetIcon;

        setTimeout(() => {
            strip.classList.remove('spinning');
            strip.style.transform = `translateY(-${stopPos * 120}px)`;
        }, 1000 + (idx * 600));
    });

    setTimeout(() => {
        isSpinning = false;
        if (isWin) showResult(winAmount);
        else {
            btn.disabled = getDailyAttempts() <= 0;
            if(!btn.disabled) btn.innerText = "Zkusit znovu";
        }
    }, 3500);
}

function showResult(amount) {
    // ≈†ifrov√°n√≠ k√≥du (Base64 + jednoduch√Ω checksum aby ne≈°el mƒõnit)
    const raw = `VAL${amount}_TS${Date.now()}`;
    const hash = btoa(raw + SALT).substring(0, 12).toUpperCase();
    const finalCode = `SUN27-${amount}-${hash}`;

    document.getElementById('game-main-screen').style.display = 'none';
    document.getElementById('game-result-screen').style.display = 'block';
    document.getElementById('reward-val').innerText = `Sleva ${amount}%`;
    document.getElementById('promo-code').innerText = finalCode;
}

function resetGame() {
    document.getElementById('game-main-screen').style.display = 'block';
    document.getElementById('game-result-screen').style.display = 'none';
    document.getElementById('spin-btn').disabled = getDailyAttempts() <= 0;
    generateReels();
    [1,2,3].forEach(id => document.getElementById(`reel${id}`).style.transform = 'translateY(0)');
}

function copyPromo() {
    navigator.clipboard.writeText(document.getElementById('promo-code').innerText);
    document.getElementById('btn-copy').innerText = 'OK!';
}

/* --- OSTATN√ç FUNKCE (Zachyv√°n√≠ zbytku webu) --- */
const t = { 
    cs: { hero: "Video editor & photographer...", contactBtn: "Kontakt", playGame: "üé∞ Zkus ≈°tƒõst√≠ o slevu", gameTitle: "27sun Slot Machine", gameStart: "Roztoƒçit automat", aboutText: "..." /* atd */ },
    en: { /* angliƒçtina */ }
};

function setLang(l) { /* p≈Øvodn√≠ funkce setLang */ }
function scrollMe(id, step) { document.getElementById(id).scrollBy({left: step, behavior: 'smooth'}); }

document.addEventListener('DOMContentLoaded', () => {
    // P≈Øvodn√≠ init funkce
    updateAttemptUI();
});
</script>
</body>
</html>
