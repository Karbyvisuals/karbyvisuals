<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>27sun â€“ Video editor & photographer</title>
<link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Inter,Arial,sans-serif;background:#0a0a0a;color:#f2f2f2}

/* SLOT MACHINE */
.game-overlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.9);
  display:none; align-items:center; justify-content:center;
  z-index:2000;
}
.game-content{
  background:#111;
  border:1px solid #ff7a18;
  padding:40px;
  border-radius:30px;
  width:90%; max-width:450px;
  text-align:center;
  position:relative;
}
.slot-machine{
  display:flex; gap:10px; justify-content:center;
  margin:30px 0;
  background:#000;
  padding:20px;
  border-radius:20px;
}
.slot-reel{
  width:80px; height:100px;
  background:#1a1a1a;
  border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  font-size:45px;
}
.reel-spin{
  animation:spin .15s linear infinite;
  filter:blur(1px);
}
@keyframes spin{
  0%{transform:translateY(-100%)}
  100%{transform:translateY(100%)}
}
.btn{
  padding:14px 35px;
  border-radius:999px;
  background:#ff7a18;
  border:none;
  cursor:pointer;
  font-weight:600;
}
.promo-wrap{
  display:flex; justify-content:space-between; align-items:center;
  background:#1a1a1a;
  border:1px dashed #ff7a18;
  padding:12px;
  border-radius:12px;
  margin-top:15px;
}
#promo-code{
  font-family:monospace;
  color:#ff7a18;
  font-weight:bold;
}
.copy-btn{
  background:#ff7a18;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>

<body>

<p style="text-align:center;margin-top:60px">
  <a href="javascript:void(0)" onclick="openGame()" style="color:#ff7a18;font-weight:bold">
    ğŸ° Zkus Å¡tÄ›stÃ­ o slevu
  </a>
</p>

<div id="game-modal" class="game-overlay">
  <div class="game-content">
    <button onclick="closeGame()" style="position:absolute;top:15px;right:20px;background:none;border:none;color:#fff;font-size:30px;cursor:pointer">&times;</button>

    <div id="game-start-screen">
      <h2>27sun Slot Machine</h2>
      <p style="opacity:.7;margin:10px 0">ZÃ­skej tÅ™i stejnÃ© symboly a vyhraj slevu</p>

      <div class="slot-machine">
        <div id="reel1" class="slot-reel">ğŸ“·</div>
        <div id="reel2" class="slot-reel">ğŸ¬</div>
        <div id="reel3" class="slot-reel">ğŸï¸</div>
      </div>

      <button id="spin-btn" class="btn" onclick="spinSlots()">RoztoÄit automat</button>
    </div>

    <div id="game-win-screen" style="display:none">
      <h2 style="color:#ff7a18">VÃHRA!</h2>
      <div id="reward-amount" style="font-size:26px;font-weight:800;margin:15px 0"></div>

      <div class="promo-wrap">
        <span id="promo-code"></span>
        <button class="copy-btn" onclick="copyPromo()" id="btn-copy">Copy</button>
      </div>

      <p style="font-size:11px;opacity:.5;margin-top:10px">
        KÃ³d vloÅ¾ do poptÃ¡vky. Nelze kombinovat s balÃ­Äky.
      </p>

      <button class="btn" onclick="resetGame()" style="margin-top:20px;background:none;border:1px solid #ff7a18;color:#ff7a18">
        Zkusit znovu
      </button>
    </div>
  </div>
</div>

<script>
const symbols=["ğŸ“·","ğŸ¬","ğŸï¸"];
let isSpinning=false;
const MAX_SPINS=5;

function openGame(){
  document.getElementById("game-modal").style.display="flex";
}
function closeGame(){
  document.getElementById("game-modal").style.display="none";
}

/* LIMIT */
function canSpin(){
  const today=new Date().toISOString().slice(0,10);
  const data=JSON.parse(localStorage.getItem("slotSpins"))||{date:today,count:0};
  if(data.date!==today){data.date=today;data.count=0}
  if(data.count>=MAX_SPINS)return false;
  data.count++;
  localStorage.setItem("slotSpins",JSON.stringify(data));
  return true;
}

function spinSlots(){
  if(isSpinning) return;
  if(!canSpin()){
    alert("Dnes uÅ¾ jsi vyÄerpal vÅ¡echny pokusy ğŸ°");
    return;
  }

  isSpinning=true;
  document.getElementById("spin-btn").disabled=true;

  document.querySelectorAll(".slot-reel").forEach(r=>r.classList.add("reel-spin"));

  setTimeout(()=>{
    stopReel(1);
    setTimeout(()=>{
      stopReel(2);
      setTimeout(()=>{
        stopReel(3);
        checkWin();
      },500);
    },500);
  },1500);
}

function stopReel(n){
  const r=document.getElementById("reel"+n);
  r.classList.remove("reel-spin");
  r.innerHTML=symbols[Math.floor(Math.random()*symbols.length)];
}

function checkWin(){
  const r1=reel1.innerHTML;
  const r2=reel2.innerHTML;
  const r3=reel3.innerHTML;

  if(r1===r2 && r2===r3){
    showWin();
  }else{
    isSpinning=false;
    document.getElementById("spin-btn").disabled=false;
    alert("NevyÅ¡lo to, zkus to znovu!");
  }
}

function showWin(){
  const rewards=[
    {v:10,w:45},
    {v:20,w:30},
    {v:30,w:15},
    {v:50,w:9},
    {v:100,w:1}
  ];

  let sum=rewards.reduce((a,b)=>a+b.w,0);
  let r=Math.random()*sum;
  let sel=10;

  for(const x of rewards){
    r-=x.w;
    if(r<=0){sel=x.v;break}
  }

  document.getElementById("game-start-screen").style.display="none";
  document.getElementById("game-win-screen").style.display="block";
  document.getElementById("reward-amount").innerText=`VyhrÃ¡l jsi slevu ${sel}%`;
  document.getElementById("promo-code").innerText=generateCode(sel);
}

function generateCode(d){
  const salt=Math.random().toString(36).slice(2,8);
  const t=Date.now().toString(36).slice(-4);
  const enc=btoa(`${d}|27sun|${salt}`).replace(/=/g,"");
  return `27S-${t}-${enc.slice(0,8).toUpperCase()}`;
}

function resetGame(){
  isSpinning=false;
  document.getElementById("spin-btn").disabled=false;
  document.getElementById("game-start-screen").style.display="block";
  document.getElementById("game-win-screen").style.display="none";
}

function copyPromo(){
  navigator.clipboard.writeText(document.getElementById("promo-code").innerText);
  document.getElementById("btn-copy").innerText="OK!";
}
</script>

</body>
</html>